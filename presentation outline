workshop outline

1. We are working with a remote SQL server today:
Show where it is: ORION VM behind Rice firewall with a private IP
--Link to Remote Resources page
Caution about setting one of these up:
-no support (we will help where we can but you develop on ORION with your own time and at your own risk)
-no automated backups
-system is not tuned for this, so things can go wrong
-security -- servers can always be attacked

2. Show documentation for the setup of the server:
(in repository with this file)
This will at the very least show them where their remote login credentials are coming from

3. Logging in:
First, get behind firewall using VPN -- https://kb.rice.edu/82263

	3A. Then ssh into vm and log in via command line
	(I will be doing this today)
	Show them the login steps

	3B. Or use MySQL Workbench
	(This is how they will work today)
	Switch over to workbench, show them the login steps

4. Browsing:
> SHOW DATABASES
> USE DATABASE
> SHOW TABLES
> SHOW COLUMNS

5. Selecting entries:
https://dev.mysql.com/doc/refman/8.0/en/select.html
> SELECT *
> SELECT specific columns
> SELECT specific columns LIMIT
> SELECT specific columns WHERE statements
basic validation with
> SELECT COUNT(*)
> SELECT COUNT(DISTINCT *)

6. Inserting and deleting entries
everybody create an account entry with a few values in a few fields
--we should expect to find some bad data types in peoples' attempts
--if not, then make one happen -- show the data being truncated when you go over the char limit on a field, for instance
--that will be a good intro to the schemata discussion
and then search for it with a select statement


7. Schemata:
https://dev.mysql.com/doc/refman/8.0/en/create-table.html
Understanding schemata (columns, foreign keys, data types)
Creating Tables (I usually do this by hand in a text editor then save and paste)




GO TO https://www.fbcad.org/certified-and-supplements-reports/

Download "Certified Property Data Export" & unzip it.
NO NEED FOR STUDNENTS TO DOWNLOAD. EXCEL IS IN THE REPO.

However, the headers for the tables appear to be off. LAND does not correspond.
Do a bad import to show this:
don't skip the header, and in doing so show them how it's misaligned
then look at the document HEAD on the command line, and make my create table statement from that. Show a successful import that way.



PROPERTY RECORD
headers
"RecordType","PropertyID","QuickRefID","PropertyNumber","LegalDesc","LegalLocationCode","LegalLocationDesc","LegalAcres","AbstractBlock","SubBlock","SubLot","SubLotRange","SubSection","SubUnit","TaxingUnitList","LeaseNumber","MapNumber","CurrMarketValue","CurrAssessedValue","CurrLandValue","CurrImprovmentValue","CurrAgValue","MarketValue","AssessedValue","LandValue","ImprovmentValue","AgValue","SquareFootage","NbhdCode","NbhdDesc","Situs","SitusPreDirectional","SitusStreetNumber","SitusStreetName","SitusStreetSuffix","SitusPostDirectional","SitusCity","SitusState","SitusZip","SitusLocation"


LAND RECORD
headers
"RecordType","Property ID","QuickRefID","PropertyNumber","OwnerID","OwnerQuickRefID","OwnerPropertyNumber","OwnerName","OwnerAddress1","OwnerAddress2","OwnerAddress3","OwnerCity","OwnerState","OwnerZip","PercentOwnership","ConfidentialOwner","Exemption List","HS Cap Adjustment"

BAD LAND IMPORT
create table land(
RecordType text,
Property_ID text,
QuickRefID text,
PropertyNumber text,
OwnerID text,
OwnerQuickRefID text,
OwnerPropertyNumber text,
OwnerName text,
OwnerAddress1 text,
OwnerAddress2 text,
OwnerAddress3 text,
OwnerCity text,
OwnerState text,
OwnerZip text,
PercentOwnership text,
ConfidentialOwner text,
Exemption_List text,
HS_Cap_Adjustment text);

GOOD LAND IMPORT
create table land(
RecordType text,
PropertyID text,
QuickRefID text,
PropertyNumber text,
LandType text,
Description text,
StateCode text,
Acres text,
SquareFeet text,
HomesiteFlag text,
ApprMethod text,
AreaFactor text,
AgFlag text,
AgYear text,
EffDepth text,
EffFront text,
EffLeft text,
EffRight text,
Sequence text,
Value text,
CurrValue text);



mysqlimport --local --lines-terminated-by="\n" --fields-terminated-by="," --fields-enclosed-by="\"" fortbend land.txt -u root -p

 --ignore-lines=1 dallas ACCOUNT_APPRL_YR.CSV -u root -p

so, do select, delete, insert
order by
count
add column
drop column


THEN
do a join where we get the address of the property alongside its current value and acreage!!
THIS SHOULD CRASH ON THEIR SYSTEM BUT WORK ON MINE
---so show them how to limit it and do an export in excel from workbench
---and then show them that I can run the whole query off the terminal into an outfile.


into outfile '/var/lib/mysql/test.csv' fields enclosed by '"' terminated by ',' escaped by '"' lines terminated by '\r\n';













